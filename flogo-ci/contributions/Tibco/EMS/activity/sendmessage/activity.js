"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,c=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(c=(o<3?n(c):o>3?n(t,r,c):n(t,r))||c);return o>3&&c&&Object.defineProperty(t,r,c),c},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var http_1=require("@angular/http"),core_1=require("@angular/core"),Observable_1=require("rxjs/Observable"),wi_contrib_1=require("wi-studio/app/contrib/wi-contrib"),messageHeaderSchema={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{correlationID:{type:"string"},replyTo:{type:"string"},deliveryMode:{type:"string"},expiration:{type:"integer"},priority:{type:"integer"}}},messagePropertiesSchema={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{property:{type:"array",items:{type:"object",properties:{name:{type:"string"},value:{type:"string"},type:{type:"string"}},required:["name","value"]}}}},SendMsgActivityContribModule=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this;return n.injector=t,n.http=r,n.contribModelService=i,n.value=function(e,t){switch(e){case"connection":return Observable_1.Observable.create(function(e){var t=[];wi_contrib_1.WiContributionUtils.getConnections(n.http,"EMS","tibco-ems-connector").subscribe(function(r){r.forEach(function(e){for(var r=0;r<e.settings.length;r++)if("name"===e.settings[r].name){t.push({unique_id:wi_contrib_1.WiContributionUtils.getUniqueId(e),name:e.settings[r].value});break}}),e.next(t)})});case"headers":return JSON.stringify(messageHeaderSchema);case"messageProperties":return JSON.stringify(messagePropertiesSchema)}},n.validate=function(e,t){return null},n.category="EMS",n}return __extends(t,e),t.prototype.getContextVar=function(e,t){return e.getField(t)?void 0===e.getField(t).value?"":e.getField(t).value:""},t}(wi_contrib_1.WiServiceHandlerContribution);SendMsgActivityContribModule=__decorate([wi_contrib_1.WiContrib({}),core_1.Injectable(),__metadata("design:paramtypes",[core_1.Injector,http_1.Http,wi_contrib_1.WiContribModelService])],SendMsgActivityContribModule),exports.SendMsgActivityContribModule=SendMsgActivityContribModule;
//# sourceMappingURL=activity.js.map
